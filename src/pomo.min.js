!function(ctx){var sprintf,vsprintf,isBrowser,escapeString,unescapeString,Errors,Pomo,instance,noop=function(){}
    String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),sprintf=function(){function get_type(variable){return Object.prototype.toString.call(variable).slice(8,-1).toLowerCase()}function str_repeat(input,multiplier){for(var output=[];multiplier>0;output[--multiplier]=input);return output.join("")}var str_format=function(){return str_format.cache.hasOwnProperty(arguments[0])||(str_format.cache[arguments[0]]=str_format.parse(arguments[0])),str_format.format.call(null,str_format.cache[arguments[0]],arguments)}
        return str_format.format=function(parse_tree,argv){var arg,i,k,match,pad,pad_character,pad_length,cursor=1,tree_length=parse_tree.length,node_type="",output=[]
            for(i=0;tree_length>i;i++)if(node_type=get_type(parse_tree[i]),"string"===node_type)output.push(parse_tree[i])
            else if("array"===node_type){if(match=parse_tree[i],match[2])for(arg=argv[cursor],k=0;k<match[2].length;k++){if(!arg.hasOwnProperty(match[2][k]))throw sprintf('[sprintf] property "%s" does not exist',match[2][k])
                arg=arg[match[2][k]]}else arg=match[1]?argv[match[1]]:argv[cursor++]
                if(/[^s]/.test(match[8])&&"number"!=get_type(arg))throw sprintf("[sprintf] expecting number but found %s",get_type(arg))
                switch(match[8]){case"b":arg=arg.toString(2)
                    break
                    case"c":arg=String.fromCharCode(arg)
                        break
                    case"d":arg>>=0
                        break
                    case"e":arg=match[7]?arg.toExponential(match[7]):arg.toExponential()
                        break
                    case"f":arg=match[7]?parseFloat(arg).toFixed(match[7]):parseFloat(arg)
                        break
                    case"o":arg=arg.toString(8)
                        break
                    case"s":arg=(arg+="")&&match[7]?arg.substring(0,match[7]):arg
                        break
                    case"u":arg=Math.abs(arg)
                        break
                    case"x":arg=arg.toString(16)
                        break
                    case"X":arg=arg.toString(16).toUpperCase()}arg=/[def]/.test(match[8])&&match[3]&&arg>=0?"+"+arg:arg,pad_character=match[4]?"0"===match[4]?"0":match[4].charAt(1):" ",pad_length=match[6]-(arg+"").length,pad=match[6]?str_repeat(pad_character,pad_length):"",output.push(match[5]?arg+pad:pad+arg)}return output.join("")},str_format.cache={},str_format.parse=function(fmt){for(var field_list,replacement_field,field_match,_fmt=fmt,match=[],parse_tree=[],arg_names=0;_fmt;){if(null!==(match=/^[^\x25]+/.exec(_fmt)))parse_tree.push(match[0])
        else if(null!==(match=/^\x25{2}/.exec(_fmt)))parse_tree.push("%")
        else{if(null===(match=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(_fmt)))throw"[sprintf] huh?"
            if(match[2]){if(arg_names|=1,field_list=[],replacement_field=match[2],field_match=[],null===(field_match=/^([a-z_][a-z_\d]*)/i.exec(replacement_field)))throw"[sprintf] huh?"
                for(field_list.push(field_match[1]);""!==(replacement_field=replacement_field.substring(field_match[0].length));)if(null!==(field_match=/^\.([a-z_][a-z_\d]*)/i.exec(replacement_field)))field_list.push(field_match[1])
                else{if(null===(field_match=/^\[(\d+)\]/.exec(replacement_field)))throw"[sprintf] huh?"
                    field_list.push(field_match[1])}match[2]=field_list}else arg_names|=2
            if(3===arg_names)throw"[sprintf] mixing positional and named placeholders is not (yet) supported"
            parse_tree.push(match)}_fmt=_fmt.substring(match[0].length)}return parse_tree},str_format}(),vsprintf=function(fmt,argv){return argv.unshift(fmt),sprintf.apply(null,argv)},isBrowser=function(){return"undefined"!=typeof window&&!!document&&!!document.getElementsByTagName},escapeString=function(val){var return_value
        return""!=val.constructor&&(return_value=val),val.replace&&(return_value=val.replace(/[\"]/g,'\\"').replace(/[\\]/g,"\\").replace(/[\/]/g,"/").replace(/[\b]/g,"\\b").replace(/[\f]/g,"\\f").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\t]/g,"\\t")),return_value},unescapeString=function(val){var return_value
        return val&&val.replace&&(return_value=val.replace("\\n","\n").replace("\\r","\r").replace("\\t","	").replace("\\f","\f").replace("\\b","\b").replace("\\r","\r")),return_value},Errors={},Errors.CustomError=function(message){this.name="CustomError",this.message=message,this.stack=Error().stack},Errors.UnknownEntryError=function(msg_id,domain){var message
        msg_id=msg_id?msg_id:"malformed",domain=domain?domain:"default_domain",message="Message ID '"+msg_id+"' not found in domain '"+domain+"'",Errors.CustomError.call(this,message),this.name="UnknownEntryError"},Errors.UnknownEntryError.prototype=Errors.CustomError.prototype,Errors.UnknownEntryError.prototype.constructor=Errors.CustomError,Errors.UnknownAcquisitionModeError=function(mode){var message
        mode=mode?mode:"None provided",message='PO files acquisition mode: "'+mode+'" is not valid.',Errors.CustomError.call(this,message),this.name="UnknownAcquisitionModeError"},Errors.UnknownAcquisitionModeError.prototype=Errors.CustomError.prototype,Errors.UnknownAcquisitionModeError.prototype.constructor=Errors.CustomError,Errors.FileReaderError=function(file){var message="Adapter cannot read from file: "+file
        CustomError.call(this,message),this.name="FileReaderError"},Errors.FileReaderError.prototype=Errors.CustomError.prototype,Errors.FileReaderError.prototype.constructor=Errors.CustomError,Pomo=function(){this.VERSION="0.1.1",this.domain="messages",this.returnStrings=!1,this.unescapeStrings=!1
        var me=this,Adapters={},getWaiter,entryExists
        getWaiter=function(){var waiter={ready:function(callback){me.waiting?setTimeout(function(){waiter.ready(callback)},20):callback.apply(me,[])}}
            return waiter},Adapters.Base=function(domain){this.toString=function(){return"[object Adapter]"},this.domain=domain},Adapters.Base.prototype={loadContents:null},Adapters.StringAdapter=function(literal_string,domain){Adapters.Base.call(this,domain),this.parsed=null,this.unparsed=""+literal_string},Adapters.StringAdapter.prototype={loadContents:function(){me.waiting=!0,null===this.parsed&&(this.parsed=me.Parser.po.parse(this.unparsed,this.domain)),me.storage.contents=this.parsed,me.waiting=!1}},Adapters.StringAdapter.constructor=Adapters.Base,isBrowser()?(Adapters.LinkAdapter=function(domain){Adapters.Base.call(this,domain)},Adapters.LinkAdapter.prototype={loadContents:function(){var links,link,Ajax,i,j,adapter
            for(me.waiting=!0,links=document.getElementsByTagName("link"),Ajax=Adapters.AjaxAdapter,i=0,j=links.length;j>i;i++)link=links[i],link&&link.getAttribute("type")&&link.getAttribute("href")&&"text/x-gettext-translation"===link.getAttribute("type")&&(adapter=new Ajax(link.getAttribute("href"),this.domain),adapter.loadContents())}},Adapters.LinkAdapter.constructor=Adapters.Base,Adapters.AjaxAdapter=function(url,domain){Adapters.Base.call(this,domain),this.url=url,this.doRequest=function(url,success,error){var request=new XMLHttpRequest
            request.open("GET",url,!0),success=success?success:noop,error=error?error:noop
            try{request.onreadystatechange=function(){var data={error:!0}
                4===this.readyState&&(this.status>=200&&this.status<400?(data=this.responseText,success.call(success,data)):error.call(error,data))},request.send()}catch(Whatever){error.call(error,{error:!0})}request=null}},Adapters.AjaxAdapter.prototype={loadContents:function(){var domain=this.domain
            me.waiting=!0,this.doRequest(this.url,function(result){var adapter=new Adapters.StringAdapter(result,domain)
                adapter.loadContents()})}}):(Adapters.FileAdapter=function(path_to_file,domain){Adapters.Base.call(this,domain),this.path=""+path_to_file},Adapters.FileAdapter.prototype={loadContents:function(){me.waiting=!0,require("fs").readFile(this.path,"utf-8",function(err,data){if(err)throw new Errors.FileReaderError(err.path)
            me.storage.contents=me.Parser.po.parse(data,this.domain),me.waiting=!1})}}),entryExists=function(domain,escaped){return!!(me.storage&&me.storage.contents&&me.storage.contents[domain]&&me.storage.contents[domain][escaped])},me.storage={},me.Parser={},me.Parser.Object=function(msg){var key,phrase_count=1
            for(key in msg)this[key]=msg[key]
            this.setCount=function(amount){phrase_count=amount>>0},this.toString=function(){var return_value,idx,canGetPluralIndex=!this.isPlural&&this.plural_forms&&this.plural_forms.push&&!!me.storage.calculatePluralIndex
                return canGetPluralIndex?(idx=me.storage.calculatePluralIndex(phrase_count),return_value=this.plural_forms[idx]):return_value=this.translation,return_value}},me.Parser.po={parse:function(text,translation_domain){var multiLineExtract,parsed,has_header_info,header_info,part,domain,counter,parts,message,part_lines,line,escaped,next_line,line_telltale,next_line_telltale,possible,cases,getTelltale=function(str){return str.substring(0,12).split(" ")[0].trim()},isMultilinePlural=function(line){return!!line&&line.match(/msgstr\[[0-9]\]/)},extractHeaderInfo=function(header){var i,j,header_line,plural_form,header_lines=header.split("\n")
            for(i=0,j=header_lines.length;j>i;i++)header_line=header_lines[i],0===header_line.indexOf('"Plural-Forms: nplurals')&&(plural_form=header_line.substring(14).slice(0,-1),me.storage.calculatePluralIndex=function(phrase_count){return eval(unescapeString(plural_form)),"undefined"==typeof plural&&(plural=0),plural})}
            for(multilineExtract=function(part_lines){for(var possible,buffer=[];possible=part_lines.shift();){if(possible=possible.trim(),0!==possible.indexOf('"')){part_lines.unshift(possible)
                break}buffer.push(possible.substring(1).slice(0,-1))}return buffer.join("")},parsed={},domain=void 0===translation_domain?"messages":translation_domain,counter=0,text=text.replace(/\r\n|\r/g,"\n"),parsed[domain]={},parts=text.split(/\n\n/),header_info=parts.shift(),has_header_info=extractHeaderInfo(header_info),has_header_info?me.storage.header_info=extractHeaderInfo(has_header_info):parts.unshift(header_info);part=parts.shift();){for(message={},part_lines=part?part.split(/\n/):[],line="";line=part_lines.shift();)switch(line=line.trim(),next_line=part_lines.slice(0,-1)[0],line_telltale=getTelltale(line),next_line_telltale=next_line?getTelltale(next_line):!1,line_telltale){case"msgctxt":message.context=line.substring(9).slice(0,-1)
                break
                case"msgid_plural":message.isPlural=!0,message.plural_id=line.substring(14).slice(0,-1)
                    break
                case"msgid":0===line.indexOf('msgid ""')?(possible=next_line.trim(),0===possible.indexOf('"')&&(message.id=multilineExtract(part_lines))):(next_line_telltale="msgstr")&&(message.id=line.substr(7).slice(0,-1))
                    continue
                case"msgstr":0===line.indexOf('msgstr ""')?(possible=next_line.trim(),0===possible.indexOf('"')&&(message.translation=multilineExtract(part_lines))):message.translation=line.substr(8).slice(0,-1)
                    break
                case"#:":case"#.":case"#":continue
                case"#,":break
                default:if(isMultilinePlural(line)){for(cases=[];isMultilinePlural(line);)cases.push(line.substring(10).slice(0,-1)),line=part_lines.shift()
                    message.plural_forms=cases,message.translation=cases[0]}continue}message.id&&message.translation&&(message=new me.Parser.Object(message),escaped=escapeString(message.id),parsed[domain][message.id]?parsed[domain][escaped].push(message):parsed[domain][escaped]=[message]),counter++}return parsed},generate:function(){throw"Feature unimplemented"}},this.wipe=function(){me.storage.contents={}},this.load=function(resource,options){options=options?options:{}
            var adapter,mode=options.mode?options.mode:!1,translation_domain=options.translation_domain?options.translation_domain:"messages"
            switch(mode){case"literal":adapter=new Adapters.StringAdapter(resource,translation_domain)
                break
                case"file":adapter=new Adapters.FileAdapter(resource,translation_domain)
                    break
                case"link":adapter=new Adapters.LinkAdapter(translation_domain)
                    break
                case"ajax":adapter=new Adapters.AjaxAdapter(resource,translation_domain)
                    break
                default:throw new Errors.UnknownAcquisitionModeError(mode)}return adapter.loadContents(),getWaiter()},this.getText=function(msg_id,options){var variables,context,domain,count,escaped,entry,i,j,translation,is_bare_string,bare_string,translated
            if(msg_id=msg_id.split(/\n/).join(""),options=options?options:{},variables=options.variables?options.variables:[],context=options.context?options.context:!1,domain=options.domain?options.domain:"messages",count=options.count?options.count:!1,escaped=escapeString(msg_id),domain||me.domain?me.domain=domain&&!me.domain?domain:domain:domain=me.domain="messages",entryExists(domain,escaped)){if(entry=me.storage.contents[domain][escaped],context)for(i=0,j=entry.length;j>i;i++)if(entry.context&&entry.context===context){translation=entry[i]
                break}return entry.unshift&&(entry=entry[0]),count&&entry.setCount(count),translation=entry,is_bare_string=""===entry.constructor,me.returnStrings&&(translation=""+entry),variables&&(bare_string=is_bare_string?translation:translation.translation,translated=vsprintf(bare_string,variables),is_bare_string?translation=translated:translation.translation=translated),is_bare_string&&me.unescapeStrings?translation=unescapeString(translation):me.unescapeStrings&&!is_bare_string&&(translation.translation=unescapeString(translation.translation)),translation}throw new Errors.UnknownEntryError(msg_id,domain)},this.getMap=function(){return me.storage.contents}},instance=new Pomo,"undefined"!=typeof module?module.exports=instance:window.Pomo=instance}(this)